#!/bin/sh
set -e

user="$1"
hostname="$2"
pattern="$3"
if [ -z "$user" ] || [ -z "$hostname" ] || [ -z "$pattern" ]; then
  echo "Usage: <user> <hostname> <pattern>"
  exit 1
fi

ssh "$user@$hostname" "sed --in-place '/$pattern/d' .ssh/authorized_keys"
